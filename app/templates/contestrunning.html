{% extends "contest.html" %}
{% load i18n %}

{% block password %}{{contest.password}}{% endblock %}

{% block content %}
  <hr>
    <form action="/answer/{{contest.id}}/" method="post">
      {% csrf_token %}
      <table class="form" id="answer_submission_form">
	{{ form.non_field_errors }}
	{% for field in form %}
	<tr>
	  <th rowspan="{{field.field.size}}">{{ field.label_tag }}</th>
	  {{ field }}
	</tr>
	{% endfor %}
      </table>
      <button name="answer" type="submit">{% trans "Submit answers" %}</button>
    </form>
{% endblock %}

{% block pagescript %}
var messages = {
    'exactLength': '{% trans "Answer must be {0} characters long"%}',
    'lengthLimit': '{% trans "Answer must be between {0} and {1} characters long" %}',
    'allowedRangeExtra': '{% trans "Allowed characters are {0}-{1} and {2}" %}',
    'allowedRange': '{% trans "Allowed characters are {0}-{1}" %}',
    'allowedExtra': '{% trans "Allowed characters are {0}" %}',
    'unique': '{% trans "All characters must be different" %}'
};
var patterns = {
    {% for pattern in patterns %}
    "id_answer_{{pattern.id}}": "{{pattern.solution_pattern}}",
    {% endfor %}
};
$(function() {
    fi.iki.ashar.Penguz.startRemainingUpdates((new Date()).getTime());
    fi.iki.ashar.Penguz.insertFieldCheckers(patterns);
});
{% endblock %}
